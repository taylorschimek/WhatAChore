{% extends 'base.html' %}
{% load static %}
{% load wac_tags %}

{% block main_content %}
{% csrf_token %}
    <!-- Lineup -->
    <section id="lineup">

      <div class="container mt-5 mb-4 text-center">
        <h1 class="mt-4 text-primary"><strong>Your Weekly Lineup</strong></h1>
      </div>

      <div class="container">
        <div class="row card-deck">

        {% for day in days %}
          <!-- Day Card -->
          <div class="card card-outline-danger p-0 mb-2 col-xs-12 col-md-3">
            <div class="card-header bg-primary text-center">
              <h3 class="card-title text-seconary">{{ dates|index:forloop.counter0 }}</h3>
            </div>
            <div class="card-block text-info">

                {% for person in people %}
                <h6 class="text-primary text-center">{{ person.name }}</h6>
                <ul class="list-group">

                    {% for ass in assignments %}
                        {% if ass.when == dates|index:forloop.counter0 %}
                        <li class="list-group-item">
                            <div>
                            <a data-toggle="modal" data-target="#assignmentModal" onclick="find_modal('{% url "assignment-detail" ass.pk %}')">
                              <p class="mb-0">{{ ass.what }}</p>
                            </a>
                            </div>
                            {% if ass.done is True %}
                            <div id="{{ ass.id }}" style="width: 24px; height: 24px; background-image:url({% static 'wac/styles/images/icons/utility/completedYES.png' %});" onclick="assignmentDone({{ ass.id }})" class="myBorder">
                            {% elif ass.done is False %}
                            <div id="{{ ass.id }}" style="width: 24px; height: 24px; background-image:url({% static 'wac/styles/images/icons/utility/completedNO.png' %});" onclick="assignmentDone({{ ass.id }})" class="myBorder">
                            {% endif %}
                            </div>
                        </li>
                        {% endif %}
                    {% endfor %}

                </ul>
                <hr />
                {% endfor %}

            </div>
          </div>
          {% if forloop.counter0 == 3 %}
      </div>
    </div>
    <div class="container">
      <div class="row card-deck mt-2">
          {% endif %}

        {% endfor %}

          <!-- Summary -->
          <div class="card bg-warning card-outline-primary p-0 mb-2 col-xs-12 col-md-3">
            <div class="card-header bg-info text-center">
              <h3 class="card-title text-secondary">Summary</h3>
            </div>
            <div class="card-block bg-warning text-info">

              <table class="table">
                <thead>
                  <tr>
                    <th>Member</th>
                    <th>Chores</th>
                    <th>Time</th>
                  </tr>
                </thead>
                <tbody id="server_response">
                {% include 'wac/assignments_list_sub.html' %}

                </tbody>
              </table>

            </div>
          </div>

        </div>
      </div>
    </section> <!-- /Lineup -->

    <div class="modal" id="assignmentModal"></div>

{% endblock %}
